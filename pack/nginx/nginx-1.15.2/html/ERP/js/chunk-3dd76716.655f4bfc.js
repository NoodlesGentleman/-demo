(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dd76716"],{"68c3":function(e,t,n){"use strict";var i=n("ed5c"),r=n.n(i);r.a},"76c8":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Card",{staticClass:"cardHeight"},[n("h2",[e._v("模块明细")]),n("div",[n("div",{staticClass:"inputModel"},[n("span",{staticClass:"inputTitle"},[e._v("模块图纸下载")]),e._l(e.modulefileList,function(t,i){return n("a",{key:i,staticStyle:{margin:"0 20px"},on:{click:function(n){return e.downLoad(t.url)}}},[e._v(e._s(t.url))])})],2),n("div",[n("Button",{attrs:{type:"primary"},on:{click:e.downloadPack}},[e._v("模块零件图纸打包下载")])],1)]),n("div",{staticClass:"inputModel"},[n("span",{staticClass:"inputTitle"},[e._v("模块编号：")]),n("Input",{staticClass:"input",attrs:{size:"large",placeholder:"请输入模块编号"},model:{value:e.devModel.modelCode,callback:function(t){e.$set(e.devModel,"modelCode",t)},expression:"devModel.modelCode"}})],1),n("div",{staticClass:"inputModel"},[n("span",{staticClass:"inputTitle"},[e._v("模块名称：")]),n("Input",{staticClass:"input",attrs:{size:"large",placeholder:"请输入模块名称"},model:{value:e.devModel.modelName,callback:function(t){e.$set(e.devModel,"modelName",t)},expression:"devModel.modelName"}})],1),n("div",{staticClass:"inputModel"},[n("span",{staticClass:"inputTitle"},[e._v("模块类别：")]),n("Select",{staticStyle:{width:"280px"},attrs:{size:"large",placeholder:"请选择模块类别："},model:{value:e.devModel.type,callback:function(t){e.$set(e.devModel,"type",t)},expression:"devModel.type"}},e._l(e.$store.state.optionItems.devModelTypeList,function(t){return n("Option",{key:t.id,attrs:{value:t.code}},[e._v(e._s(t.displayValue))])}),1)],1),n("div",{staticClass:"inputModel"},[n("span",{staticClass:"inputTitle"},[e._v("模块规格：")]),n("Input",{staticClass:"input",attrs:{size:"large",placeholder:"请输入模块规格："},model:{value:e.devModel.specs,callback:function(t){e.$set(e.devModel,"specs",t)},expression:"devModel.specs"}})],1),n("div",{staticClass:"inputModel"},[n("span",{staticClass:"inputTitle"},[e._v("模块版本号：")]),n("Input",{staticClass:"input",attrs:{size:"large",placeholder:"请输入版本号"},model:{value:e.devModelVersion.version,callback:function(t){e.$set(e.devModelVersion,"version",t)},expression:"devModelVersion.version"}})],1),n("div",{staticClass:"inputModel"},[n("span",{staticClass:"inputTitle"},[e._v("审核状态:")]),n("Button",{staticClass:"input",attrs:{type:"primary"},domProps:{innerHTML:e._s(e.filter_status(e.devModelVersion.reviewStatus))}})],1),n("div",{staticClass:"inputModel"},[n("span",{staticClass:"inputTitle"},[e._v("模块描述：")]),n("Input",{staticStyle:{width:"900px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:3},placeholder:"请输入模块描述"},model:{value:e.devModel.discription,callback:function(t){e.$set(e.devModel,"discription",t)},expression:"devModel.discription"}})],1),n("h2",[e._v("零件明细")]),n("div",{staticClass:"table"},[n("Table",{attrs:{columns:e.partColumns,loading:e.loading,data:e.accessoryList}})],1),n("h2",[e._v("历史版本")]),n("div",{staticClass:"table"},[n("Table",{attrs:{columns:e.historyColumns,loading:e.loadingHistory,data:e.historyVersionList}})],1),n("div",{staticClass:"newLine",staticStyle:{"text-align":"center"}},[1===e.devModelVersion.reviewStatus?n("Button",{staticStyle:{margin:"0 10px"},attrs:{type:"primary"},on:{click:e.clickUpdateModule}},[e._v("确认提交")]):e._e(),n("Button",{staticStyle:{margin:"0 10px"},attrs:{type:"primary"}},[e._v("关闭")])],1)])],1)},r=[],a=(n("96cf"),n("3b8d")),s=(n("f3e2"),n("d225")),o=n("b0b4"),d=n("308d"),u=n("6bb5"),l=n("4e2b"),c=n("9ab4"),p=n("d265"),v=n("a542"),f=n("f046"),h=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.loading=!1,e.loadingPass=!1,e.loadingHistory=!1,e.modulefileList=[],e.devModel={currentVersion:"",currentVersionId:"",discription:"",id:"",modelCode:"",modelName:"",specs:"",status:"",type:""},e.devModelVersion={attachment:"",createUser:"",id:"",modelId:"",reviewStatus:"",reviewTime:"",reviewUser:"",reviewUserName:"",status:"",updateUser:"",version:"",zipUrl:""},e.devModelWithNewQuery={attachment:"",version:"",specs:"",discription:"",modelCode:"",modelName:"",type:"",id:"",versionId:"",devModelDetails:[{memo:"",partCount:"",id:"",partVersionId:""}]},e.accessoryList=[],e.historyVersionList=[],e.partColumns=[{title:"零件编号",align:"center",key:"devPart_partCode"},{title:"零件名称",align:"center",key:"devPart_partName"},{title:"零件版本",align:"center",key:"devPart_currentVersion"},{title:"零件数量",align:"center",key:"devModelDetail_partCount"},{title:"最后修改时间",align:"center",key:"devPart_updateTime"},{title:"操作",align:"center",key:"operat",render:function(t,n){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.openPartDetail(n)}}},"查看")])}}],e.historyColumns=[{title:"模块版本",align:"center",key:"version"},{title:"最后修改时间",align:"center",key:"updateTime"},{title:"版本审核时间",align:"center",key:"reviewTime"},{title:"版本提交时间",align:"center",key:"updateTime"},{title:"审核状态",align:"center",key:"reviewStatus",render:function(t,n){return t("Tag",{style:{background:"#fff",border:"none"}},e.filter_status(n.row.reviewStatus))}},{title:"备注",align:"center",key:"memo"},{title:"操作",align:"center",key:"operat",render:function(t,n){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.openModelDetail(n)}}},"查看")])}}],e}return Object(l["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){this._getDevModelWithVersion(this.$route.query.versionId)}},{key:"openPartDetail",value:function(e){this.$router.push({name:"AccessoryDetails",query:{versionId:e.row.devPartVersion.id}})}},{key:"openModelDetail",value:function(e){this.$router.push({name:"ModularDetails",query:{versionId:e.row.id}})}},{key:"clickUpdateModule",value:function(){var e=this;this.devModelWithNewQuery=this.devModel,this.devModelWithNewQuery.attachment=this.devModelVersion.attachment,this.devModelWithNewQuery.version=this.devModelVersion.version,this.devModelWithNewQuery.versionId=this.devModelVersion.id,this.devModelWithNewQuery.devModelDetails=[],this.accessoryList.forEach(function(t){e.devModelWithNewQuery.devModelDetails.push(t.devModelDetail)}),this._updateModule(this.devModelWithNewQuery)}},{key:"_updateModule",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["o"])(t);case 2:n=e.sent,0===n.responseCode?this.$Message.success("更新成功"):this.$Message.success(n.responseMessage);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_getDevModelWithVersion",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["f"])({versionId:t});case 2:if(n=e.sent,0!==n.responseCode){e.next=11;break}return this.devModel=n.responseData.devModel,e.next=7,this._getDevModelVersionList(this.devModel.id);case 7:return this.devModelVersion=n.responseData.devModelVersion,void 0!==this.devModelVersion.attachment&&(this.modulefileList=JSON.parse(this.devModelVersion.attachment)),e.next=11,this._getDevModelDetail(this.devModelVersion.id);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"downLoad",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["a"])(t);case 2:n=e.sent,window.open(n.responseData);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"downloadPack",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["a"])(this.devModelVersion.zipUrl);case 2:t=e.sent,window.open(t.responseData);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_getDevModelDetail",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Object(v["c"])({modelVersionId:t});case 3:n=e.sent,0===n.responseCode&&(this.accessoryList=n.responseData,this.accessoryList.forEach(function(e){e.devPartVersion_id=e.devPartVersion.id,e.devPart_partCode=e.devPart.partCode,e.devPart_partName=e.devPart.partName,e.devModelDetail_partCount=e.devModelDetail.partCount,e.devPart_currentVersion=e.devPart.currentVersion,e.devPart_updateTime=e.devPart.updateTime}),this.loading=!1);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_getDevModelVersionList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingHistory=!0,e.next=3,Object(v["e"])({modelId:t});case 3:n=e.sent,0===n.responseCode&&(this.historyVersionList=n.responseData,this.loadingHistory=!1);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"filter_status",value:function(e){var t="";return this.reviewStatusList.forEach(function(n){n.code===e&&(t=n.displayValue)}),t}},{key:"reviewStatusList",get:function(){return this.$store.state.optionItems.reviewStatusList}}]),t}(p["c"]);h=c["a"]([Object(p["a"])({})],h);var y=h,m=y,g=(n("68c3"),n("2877")),M=Object(g["a"])(m,i,r,!1,null,"6e23482e",null);t["default"]=M.exports},a542:function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"k",function(){return o}),n.d(t,"f",function(){return d}),n.d(t,"m",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"g",function(){return p}),n.d(t,"h",function(){return v}),n.d(t,"i",function(){return f}),n.d(t,"n",function(){return h}),n.d(t,"o",function(){return y}),n.d(t,"p",function(){return m}),n.d(t,"j",function(){return g}),n.d(t,"a",function(){return M}),n.d(t,"b",function(){return w}),n.d(t,"q",function(){return k}),n.d(t,"l",function(){return C});var i=n("4576"),r=n("4328"),a=n.n(r),s=function(e){return i["a"].post("/api/getDevModelListByQuery",a.a.stringify(e))},o=function(){return i["a"].post("/api/user/getGroupList")},d=function(e){return i["a"].post("/api/getDevModelWithVersion",a.a.stringify(e))},u=function(e){return i["a"].post("/api/newDevModel",a.a.parse(e),{headers:{"Content-Type":"application/json;charset=UTF-8"}})},l=function(e){return i["a"].post("/api//getDevModelDetail",a.a.stringify(e))},c=function(e){return i["a"].post("/api/getDevModelVersionList",a.a.stringify(e))},p=function(e){return i["a"].post("/api/getDevPartListByQuery",a.a.stringify(e))},v=function(e){return i["a"].post("/api/getDevPartVersionList",a.a.stringify(e))},f=function(e){return i["a"].post("/api/getDevPartWithVersion",a.a.stringify(e))},h=function(e){return i["a"].post("/api/newDevPart",a.a.stringify(e))},y=function(e){return i["a"].post("/api/updateDevModel",a.a.parse(e),{headers:{"Content-Type":"application/json;charset=UTF-8"}})},m=function(e){return i["a"].post("/api/updateDevPart",a.a.stringify(e))},g=function(){return i["a"].post("/api/getDevelopOptionGroup")},M=function(e){return i["a"].post("/api/addDevelopOptionItem",a.a.stringify(e))},w=function(e){return i["a"].post("/api/deleteDevelopOptionItem",a.a.stringify(e))},k=function(e){return i["a"].post("/api/updateDevelopOptionItem",a.a.stringify(e))},C=function(e){return i["a"].get("/api/system/getOptionItemById",e)}},ed5c:function(e,t,n){},f046:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return o});var i=n("4576"),r=n("4328"),a=n.n(r),s=function(){return i["a"].post("/api/devUpload/getAliUploadAccess")},o=function(e){return i["a"].post("/api/devUpload/getAliImageUrl",a.a.stringify({imageUrl:e}))}}}]);