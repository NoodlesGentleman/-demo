(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27f430da"],{"6f23":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{attrs:{model:t.formItem,"label-width":120}},[r("FormItem",{attrs:{label:"商品名称："}},[r("Input",{attrs:{placeholder:"请输入名称"},model:{value:t.formItem.productName,callback:function(e){t.$set(t.formItem,"productName",e)},expression:"formItem.productName"}})],1),r("FormItem",{attrs:{label:"商品价格："}},[r("Input",{attrs:{placeholder:"请输入价格"},model:{value:t.formItem.price,callback:function(e){t.$set(t.formItem,"price",e)},expression:"formItem.price"}})],1),r("FormItem",{attrs:{label:"商品类型："}},[r("Select",{model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},t._l(t.typeList,function(e){return r("Option",{key:e.id,attrs:{value:e.code}},[t._v(t._s(e.displayValue))])}),1)],1),r("FormItem",{attrs:{label:"商品首页图地址："}},[r("img",{staticStyle:{width:"100px"},attrs:{src:t.formItem.homeUrl,alt:""}}),r("Input",{attrs:{placeholder:"请输入首页图地址"},model:{value:t.formItem.homeUrl,callback:function(e){t.$set(t.formItem,"homeUrl",e)},expression:"formItem.homeUrl"}})],1),r("FormItem",{attrs:{label:"商品详情图："}},[r("Modal",{attrs:{width:720},on:{"on-ok":t.addImgClick},model:{value:t.detailsImgModal,callback:function(e){t.detailsImgModal=e},expression:"detailsImgModal"}},[r("div",[t._v("\n              大图："),r("Input",{staticStyle:{margin:"10px 0",width:"400px"},attrs:{placeholder:"请输入商品详情大图地址"},model:{value:t.imgData.bigImg,callback:function(e){t.$set(t.imgData,"bigImg",e)},expression:"imgData.bigImg"}}),r("img",{staticStyle:{width:"100px",height:"100px",display:"block"},attrs:{src:t.imgData.bigImg,alt:""}}),r("br"),t._v("\n              小图："),r("Input",{staticStyle:{margin:"10px 0",width:"400px"},attrs:{placeholder:"请输入商品详情小图地址"},model:{value:t.imgData.smallImg,callback:function(e){t.$set(t.imgData,"smallImg",e)},expression:"imgData.smallImg"}}),r("img",{staticStyle:{width:"50px",height:"50px",display:"block"},attrs:{src:t.imgData.smallImg,alt:""}})],1)]),r("Button",{attrs:{type:"primary"},on:{click:function(e){t.detailsImgModal=!0}}},[t._v("添加详情图")])],1),r("div",{staticStyle:{"margin-left":"100px"}},t._l(t.formItem["product_details"],function(e,a){return r("div",{key:a,staticClass:"imgGroup"},[r("Icon",{staticClass:"removeBtn",attrs:{type:"md-close"},on:{click:function(e){return t.removeDetailsImg(a)}}}),r("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.bigImg,alt:""}}),r("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.smallImg,alt:""}})],1)}),0),r("FormItem",{attrs:{label:"商品描述："}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入商品描述"},model:{value:t.formItem.productDesc,callback:function(e){t.$set(t.formItem,"productDesc",e)},expression:"formItem.productDesc"}})],1),r("FormItem",[t.$route.query._id?r("Button",{attrs:{type:"warning"},on:{click:t.changeClick}},[t._v("修改")]):r("Button",{attrs:{type:"primary"},on:{click:t.addClick}},[t._v("新增")]),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"productList"})}}},[t._v("返回")])],1)],1)],1)},i=[],s=(r("96cf"),r("3b8d")),o=r("c40e"),c={data:function(){return{detailsImgModal:!1,imgData:{bigImg:"",smallImg:""},typeList:[{id:0,code:1,displayValue:"手机"},{id:1,code:2,displayValue:"耳机"},{id:2,code:3,displayValue:"配件"},{id:3,code:4,displayValue:"周边"}],formItem:{productName:"",price:"",status:"",productDesc:"",homeUrl:"",product_details:[],product_Type:[],type:""}}},mounted:function(){this.$route.query._id&&this.$route.query.type&&this._getdetailsById({_id:this.$route.query._id,type:this.$route.query.type})},methods:{addClick:function(){this._addProduct(this.formItem)},changeClick:function(){var t=this;this.$Modal.confirm({title:"您正在做修改操作，确认继续修改吗？",onOk:function(){t._updateProductById(t.formItem)}})},removeDetailsImg:function(t){var e=this;this.formItem.product_details.forEach(function(r,a){t==a&&e.formItem.product_details.splice(a,1)})},addImgClick:function(){this.formItem.product_details.length<5?(this.formItem.product_details.push(this.imgData),this.imgData={bigImg:"",smallImg:""}):this.$Notice.warning({title:"警告",desc:"最多只能上传四组图片"})},_getdetailsById:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$Spin.show(),t.next=3,Object(o["f"])(e);case 3:r=t.sent,0==r.status&&(this.formItem=r.result,this.$Spin.hide());case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),_addProduct:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])(e);case 2:r=t.sent,0==r.status&&(this.$Message.success("新增成功"),this.formItem={productName:"",price:"",status:"",productDesc:"",homeUrl:"",product_details:[],product_Type:[],type:""});case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),_updateProductById:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["h"])(e);case 2:r=t.sent,0==r.status&&(this.$Message.success("修改成功"),this._getdetailsById({_id:this.$route.query._id,type:this.$route.query.type}));case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}},n=c,l=(r("8751"),r("2877")),m=Object(l["a"])(n,a,i,!1,null,"b5457420",null);e["default"]=m.exports},8751:function(t,e,r){"use strict";var a=r("a839"),i=r.n(a);i.a},a839:function(t,e,r){}}]);