(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-880a382c"],{"24a4":function(t,e,r){t.exports=r.p+"img/401img.85c571de.png"},"27eb":function(t,e,r){"use strict";var n=r("b3e1"),i=r.n(n);i.a},9522:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart"},[t.loginMsg?t._e():r("div",{staticClass:"loginMsg"},[r("div",{staticClass:"msg"},[r("Icon",{staticStyle:{color:"#2d8cf0"},attrs:{type:"ios-alert"}}),t._v("您还没有登录！登录后可显示您账号中已加入的商品哦~\n      "),r("Button",{attrs:{type:"primary",to:{name:"login"}}},[t._v("去登录")]),r("span",{staticStyle:{margin:"0 20px","font-size":"18px"},on:{click:function(e){t.loginMsg=!0}}},[r("Icon",{attrs:{type:"ios-close-circle"}})],1)],1)]),r("div",{staticClass:"layout"},[t.cartList.length&&t.cartList.length>0?r("div",[r("Table",{attrs:{columns:t.columns_cart,data:t.cartList}}),r("div",{staticClass:"settlement"},[r("span",{staticClass:"goodsCount"},[t._v(" 共"+t._s(t.total)+"件商品")]),r("span",{staticClass:"totalPrice"},[t._v("已优惠0.00元， 合计(不含运费)：￥"),r("strong",[t._v(t._s(t.totalPrice)+"元")])]),r("span",{staticClass:"setPrice"},[r("Button",{attrs:{type:"error"},on:{click:t.commitCart}},[t._v("结算")])],1),r("Modal",{attrs:{align:"center",title:"谢谢！！！"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("Card",[r("div",{staticStyle:{"text-align":"center"}},[r("img",{attrs:{src:"https://file.iviewui.com/dist/2ecd3b0452aa197097d5131afacab7b8.png"}}),r("h3",[t._v("这个项目基于iviewUI库实现，支付尚未开发！")])])])],1)],1)],1):r("div",{staticClass:"nodata"},[t._m(0),t.hasLogin?r("h3",[r("p",[t._v("购物车空空如也，快去商城首页选购吧！")]),r("Button",{attrs:{size:"large",type:"primary"},on:{click:function(e){return t.$router.push({name:"home"})}}},[t._v("去首页")])],1):r("h3",[r("p",[t._v("还没有登录哟，快去登录吧！")]),r("Button",{attrs:{size:"large",type:"primary"},on:{click:function(e){return t.$router.push({name:"login"})}}},[t._v("去登录")])],1)])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{attrs:{src:r("24a4"),alt:""}})])}],a=(r("96cf"),r("3b8d")),s=r("90fe"),c=r("c24f"),o=r("f8b7"),u={data:function(){var t=this;return{hasLogin:!1,modal:!1,loginMsg:Object(s["b"])(),cartList:[],total:0,totalPrice:0,columns_cart:[{title:"商品图",key:"homeUrl",width:200,render:function(t,e){return t("img",{attrs:{src:e.row.homeUrl,style:"width: 100px;"}})}},{title:"商品描述",key:"productDesc"},{title:"单价",key:"price"},{title:"数量",key:"productNum",render:function(e,r){return e("div",[e("InputNumber",{props:{max:5,min:1,value:r.row.productNum},on:{"on-change":function(e){t.cartEdit(e,r)}}})])}},{title:"小计",key:"price",render:function(t,e){return t("div",[t("span",e.row.price*e.row.productNum)])}},{title:"操作",key:"action",width:150,align:"center",render:function(e,r){return e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(r)}}},"删除")}}]}},mounted:function(){this.hasLogin=Object(s["b"])(),this._getCartList()},methods:{remove:function(t){this._cartDelet({_id:t.row._id})},cartEdit:function(t,e){e.row.productNum=t,this._cartEdit(e.row)},commitCart:function(){this._generateOrder({orderTotal:this.totalPrice})},_generateOrder:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["a"])(e);case 2:r=t.sent,0==r.status?(this.$Message.success("恭喜您！下单成功！快去支付吧"),this.$router.push({name:"payment",params:{orderId:r.orderId}})):this.$Message.error(r.msg);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),_cartEdit:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["e"])(e);case 2:r=t.sent,0==r.status&&this._getCartList();case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),_cartDelet:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])(e);case 2:r=t.sent,0==r.status&&(this.$Message.success("删除成功"),this._getCartList());case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),_getCartList:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["f"])();case 2:e=t.sent,this.$Spin.show(),0==e.status?(this.cartList=e.result,this.totalPrice=0,this.cartList.forEach(function(t){r.totalPrice+=t.price*t.productNum}),this.total=e.count,this.$Spin.hide()):setTimeout(function(){r.$Spin.hide()},2e3);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},l=u,d=(r("27eb"),r("2877")),p=Object(d["a"])(l,n,i,!1,null,"5e9514c4",null);e["default"]=p.exports},b3e1:function(t,e,r){},f8b7:function(t,e,r){"use strict";r.d(e,"a",function(){return a}),r.d(e,"b",function(){return s}),r.d(e,"c",function(){return c}),r.d(e,"d",function(){return o});var n=r("365c"),i="/api",a=function(t){return n["a"].fetchPost("".concat(i,"/orders/generateOrder"),t)},s=function(){return n["a"].fetchPost("".concat(i,"/orders/getOrderList"))},c=function(t){return n["a"].fetchPost("".concat(i,"/orders/orderChangeStatusById"),t)},o=function(t){return n["a"].fetchPost("".concat(i,"/orders/orderRemoveById"),t)}}}]);