(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d77ff7a"],{"2ba4":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Card",{staticClass:"cardHeight"},[s("h2",[e._v("待办事项")]),s("div",{staticClass:"table"},[s("Table",{attrs:{columns:e.columns1,loading:e.loading,data:e.jobList}})],1),s("div",{staticClass:"page"},[s("Page",{attrs:{total:e.totals,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.handlePage,"on-page-size-change":e.handlePageSize}})],1)]),s("Modal",{attrs:{"mask-closable":!1,width:540,"class-name":"vertical-center-modal"},model:{value:e.refuseModal,callback:function(t){e.refuseModal=t},expression:"refuseModal"}},[s("p",{staticStyle:{"text-align":"center",color:"orange"},attrs:{slot:"header"},slot:"header"},[s("span",[e._v("请填写不通过的原因")])]),s("div",{staticClass:"inputModel"},[s("span",{staticClass:"inputTitle"},[e._v("原因：")]),s("Input",{staticStyle:{width:"400px"},attrs:{autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:"请输入不通过的原因"},model:{value:e.refuseForm.memo,callback:function(t){e.$set(e.refuseForm,"memo",t)},expression:"refuseForm.memo"}})],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:e.continueRefuse}},[e._v("确认")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){e.refuseModal=!1}}},[e._v("取消")])],1)])],1)},r=[],n=(s("96cf"),s("3b8d")),i=(s("f3e2"),s("d225")),o=s("b0b4"),u=s("308d"),c=s("6bb5"),l=s("4e2b"),p=s("9ab4"),f=s("d265"),d=s("4576"),h=s("4328"),m=s.n(h),b=function(e){return d["a"].post("/api/job/getJobList",m.a.stringify(e))},g=function(e){return d["a"].post("/api/job/passReview",m.a.stringify(e))},y=function(e){return d["a"].post("/api/job/refuseReview",m.a.stringify(e))},v=s("ff1a"),w=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(u["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.refuseModal=!1,e.columns1=[{title:"任务编号",align:"center",key:"jobCode"},{title:"任务类型",align:"center",key:"type",render:function(t,s){return t("Tag",{style:{background:"#fff",border:"none"}},e.filter_type(s.row.type))}},{title:"备注",align:"center",key:"memo"},{title:"提交人",align:"center",key:"commitUserName"},{title:"提交时间",align:"center",key:"commitTime"},{title:"操作",key:"operat",align:"center",render:function(t,s){return t("div",[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.goDevModuleDetails(s)}}},"查看"),t("Button",{props:{type:"primary",size:"small"},style:{margin:"20px"},on:{click:function(){e.passView(s)}}},"通过"),t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.refuseReview(s)}}},"不通过")])}}],e.JobListParams={pageNum:1,pageSize:10},e.jobTypeList=[],e.totals=0,e.jobList=[],e.refuseForm={memo:"",jobId:""},e}return Object(l["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=Object(v["j"])("jobTypeList");e&&(this.jobTypeList=JSON.parse(e)),this._getJobList(this.JobListParams)}},{key:"goDevModuleDetails",value:function(e){1===e.row.type||2===e.row.type||5===e.row.type?this.$router.push({name:"ModularDetails",query:{versionId:e.row.referenceId}}):this.$router.push({name:"AccessoryDetails",query:{versionId:e.row.referenceId}})}},{key:"passView",value:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"您确定要通过该条记录吗？",onOk:function(){t._passView(e.row.id)}})}},{key:"refuseReview",value:function(e){this.refuseModal=!0,this.refuseForm.jobId=e.row.id}},{key:"continueRefuse",value:function(){this._refuseReview(this.refuseForm)}},{key:"handlePage",value:function(e){this.JobListParams.pageNum=e,this._getJobList(this.JobListParams)}},{key:"handlePageSize",value:function(e){this.JobListParams.pageSize=e,this._getJobList(this.JobListParams)}},{key:"filter_type",value:function(e){var t="";return this.jobTypeList.forEach(function(s){s.code===e&&(t=s.displayValue)}),t}},{key:"_passView",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g({jobId:t});case 2:s=e.sent,0===s.responseCode?(this.$Message.success("通过成功！"),this._getJobList(this.JobListParams)):this.$Message.error(s.responseMessage);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_refuseReview",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:s=e.sent,0===s.responseCode?(this.$Message.success("拒绝成功！"),this.refuseModal=!1,this._getJobList(this.JobListParams)):this.$Message.error(s.responseMessage);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_getJobList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,b(t);case 3:s=e.sent,0===s.responseCode?(this.jobList=s.responseData.rows,this.totals=s.responseData.total,this.loading=!1):this.$Message.error(s.responseMessage);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(f["c"]);w=p["a"]([Object(f["a"])({})],w);var k=w,j=k,L=(s("eae8"),s("2877")),M=Object(L["a"])(j,a,r,!1,null,"bf1a88ac",null);t["default"]=M.exports},e289:function(e,t,s){},eae8:function(e,t,s){"use strict";var a=s("e289"),r=s.n(a);r.a}}]);